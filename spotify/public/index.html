<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/login.css">
    <title>Trackerfy</title>
</head>

<body>
    <header class="header">
        <div class="header__logos">
            <img class="header__img" alt="Spotify Logo" src="./assets/spotify_logo.png">
            <h1 class="header__menu__name">Trackerfy</h1>
        </div>
    </header>
    <main class="presentation">
        <h2>See your Spotify stats!</h2>
        <form class="buttom" id="login-form">
            <label for="username">Username:</label><br>
            <input type="text" id="username" name="username"><br>
            <label for="password">Password:</label><br>
            <input type="password" id="password" name="password">
            <button type="submit" id="submit-button">Enjoy!</button>
        </form>
    </main>
    <footer class="footer">
        <p>Trackerfy</p>
    </footer>

    <script>
        const CLIENT_ID = 'c4a70cb602e745e0bab72dd3ff52d7b5';
        const CLIENT_SECRET = 'b92dd100d00f4b659a1100aaf330672b';
        const TOKEN_API_URL = "https://accounts.spotify.com/api/token";

        const loginForm = document.getElementById("login-form");
        loginForm.addEventListener("submit", (event) => {
        event.preventDefault(); // evitar que a página seja recarregada

        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;
        const basicAuth = btoa(`${CLIENT_ID}:${CLIENT_SECRET}`); // codificar as credenciais em Base64

        fetch(TOKEN_API_URL, {
            method: "POST",
            headers: {
            "Content-Type": "application/x-www-form-urlencoded",
            Authorization: `Basic ${basicAuth}`,
            },
            body: new URLSearchParams({
            grant_type: "password",
            username: username,
            password: password,
            }),
        })
            .then((response) => response.json())
            .then((data) => {
            const accessToken = data.access_token;
            // armazenar o token de acesso em uma variável ou em um cookie
            console.log(`Token de acesso: ${accessToken}`);
            })
            .catch((error) => {
            console.error("Erro ao obter token de acesso:", error);
            });
        });
    </script>

    <!-- <script src="../src/index.js"></script> -->
</body>

</html>